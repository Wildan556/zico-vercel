<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZICO AI</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  /* RESET & BODY */
  * { box-sizing: border-box; margin:0; padding:0; }
  body {
    font-family: 'Poppins', sans-serif;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    background: url('https://i.pinimg.com/originals/66/lT/Mq/66lTMqSiO.jpg') center/cover no-repeat;
    backdrop-filter: blur(3px);
    color:#000;
    padding:20px;
  }

  h1 { font-size: 48px; font-weight:700; text-align:center; margin-bottom:5px; }
  h2 { font-size:18px; font-weight:400; text-align:center; margin-bottom:20px; opacity:0.9; }

  /* CHAT BOX */
  .chat-box {
    width:100%;
    max-width:500px;
    background:rgba(255,255,255,0.9);
    border-radius:12px;
    display:flex;
    flex-direction:column;
    overflow:hidden;
    margin-bottom:20px;
    box-shadow:0 8px 25px rgba(0,0,0,0.2);
    height: 400px; /* Tambahan agar box memiliki tinggi tetap */
  }

  #messages {
    flex:1;
    padding:15px;
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    gap:10px;
    font-size:14px;
  }

  .msg-bubble {
    max-width:80%;
    padding:10px 14px;
    border-radius:15px;
    line-height:1.4;
    word-wrap: break-word;
  }
  .user { align-self:flex-end; background:#4fc3f7; color:#fff; border-bottom-right-radius:2px; }
  .zico { align-self:flex-start; background:#e0e0e0; color:#000; border-bottom-left-radius:2px; }

  .chat-input {
    display:flex;
    border-top:1px solid #ccc;
    background: #fff;
  }
  #msg {
    flex:1;
    border:none;
    padding:12px;
    outline:none;
    font-size:14px;
  }
  #send {
    background:#4fc3f7;
    color:white;
    border:none;
    padding:0 20px;
    cursor:pointer;
    font-weight:600;
  }

  /* BUTTONS SOSMED & CONTACT */
  .full-btn {
    width:100%;
    max-width:500px;
    padding:15px;
    margin:5px 0;
    border:none;
    border-radius:10px;
    background:#4fc3f7;
    color:#fff;
    font-weight:600;
    cursor:pointer;
    font-size:16px;
    transition:0.2s;
  }
  .full-btn:hover { opacity:0.85; }

  /* MODAL CONTACT */
  .modal-bg {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:10;
  }
  .modal {
    background:#fff; color:#000;
    padding:20px; border-radius:12px;
    max-width:400px; width:90%; display:flex; flex-direction:column; gap:12px;
  }
  .modal input, .modal textarea {
    padding:10px; border-radius:8px; border:1px solid #ccc; width:100%; font-size:14px;
  }
  .modal button { background:#4fc3f7; color:white; padding:10px; border:none; border-radius:8px; cursor:pointer; font-weight:600; }
  .modal button:hover{ opacity:0.85; }

  /* FOOTER */
  footer { margin-top:20px; font-size:12px; opacity:0.7; }
</style>
</head>
<body>

  <h1>ZICO AI</h1>
  <h2>Make your life easier with, Zico Ai</h2>

  <div class="chat-box">
    <div id="messages">
      <div class="msg-bubble zico">Halo! ada yang perlu dibantu?</div>
    </div>
    <div class="chat-input">
      <input type="text" id="msg" placeholder="Tulis pesan..." autocomplete="off">
      <button id="send">Kirim</button>
    </div>
  </div>

  <button class="full-btn" id="contactBtn">Kontak Developer</button>

  <div class="modal-bg" id="modalBg">
    <div class="modal">
      <h3>Kontak Developer</h3>
      <input type="text" id="devName" placeholder="Nama">
      <input type="email" id="devEmail" placeholder="Email">
      <textarea id="devReason" placeholder="Alasan menghubungi..." rows="3"></textarea>
      <button id="sendMail">Kirim</button>
    </div>
  </div>

  <button class="full-btn" onclick="window.open('https://instagram.com/itzwil._','_blank')">Instagram</button>
  <button class="full-btn" onclick="window.open('https://www.tiktok.com/@itzwil25','_blank')">TikTok</button>
  <button class="full-btn" onclick="window.open('https://wa.me/6283829565226?text=Halo%20!','_blank')">WhatsApp ZicoBot</button>
  
  <footer>Powered by OpenAI</footer>

<script>
  // --- LOGIKA MODAL ---
  const contactBtn = document.getElementById('contactBtn');
  const modalBg = document.getElementById('modalBg');
  const sendMailBtn = document.getElementById('sendMail');

  contactBtn.addEventListener('click', ()=> modalBg.style.display='flex');
  modalBg.addEventListener('click', e=>{ if(e.target===modalBg) modalBg.style.display='none'; });

  sendMailBtn.addEventListener('click', ()=>{
    const name = document.getElementById('devName').value.trim();
    const email = document.getElementById('devEmail').value.trim();
    const reason = document.getElementById('devReason').value.trim();

    if(!name||!email||!reason){ alert('Harap isi semua field!'); return; }

    const subject = encodeURIComponent(`Kontak dari ${name}`);
    const body = encodeURIComponent(`Nama: ${name}\nEmail: ${email}\nAlasan: ${reason}`);
    window.location.href = `mailto:itzwildan5@gmail.com?subject=${subject}&body=${body}`;
    modalBg.style.display='none';
  });

  // --- LOGIKA CHAT AI ---
  document.addEventListener('DOMContentLoaded', () => {
    const messagesContainer = document.getElementById('messages');
    const msgInput = document.getElementById('msg');
    const sendBtn = document.getElementById('send');

    function addMessage(text, sender) {
      const div = document.createElement('div');
      div.className = `msg-bubble ${sender}`;
      div.textContent = text;
      messagesContainer.appendChild(div);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      return div;
    }

    async function sendMessage() {
      const text = msgInput.value.trim();
      if (!text) return;

      // 1. Tampilkan pesan user
      addMessage(text, 'user');
      msgInput.value = '';

      // 2. Tampilkan status loading
      const zicoMsg = addMessage('Zico sedang berpikir...', 'zico');

      try {
        // 3. Panggil API Vercel kita
        const res = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        });

        const data = await res.json();

        // 4. Update pesan dengan balasan asli
        if (data.reply) {
          zicoMsg.textContent = data.reply;
        } else {
          zicoMsg.textContent = 'Maaf, terjadi kesalahan pada API.';
        }

      } catch (err) {
        zicoMsg.textContent = 'Gagal terhubung ke server!';
        console.error(err);
      }
    }

    sendBtn.addEventListener('click', sendMessage);
    msgInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendMessage();
    });
  });
</script>
</body>
</html>
